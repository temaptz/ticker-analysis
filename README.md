### Ticker Analysis — AI-платформа для прогноза цен, анализа новостей и торговых рекомендаций

Ticker Analysis — это продакшн-ориентированная платформа, которая объединяет регрессионные ML-модели на (CatBoost), анализ новостного фона при помощи LLM (через Ollama + LangChain или LORA-адаптер для gemma3), а также граф принятия решений (LangGraph) для выдачи прозрачных торговых рекомендаций на покупку/продажу активов. Проект включает полноценный стек: сбор и хранение данных (PostgreSQL), REST API (Django), UI (Angular + ECharts), кэш (Redis), контейнеризацию (Docker Compose) и планировщик заданий.

### Ключевые возможности
- **Мульти‑модельные прогнозы**: TA‑1, TA‑1_1, TA‑1_2, TA‑2, TA‑2_1 + агрегирующая модель Consensus.
- **LLM‑оценка новостного фона**: извлечение тональности и силы влияния новости (sentiment, impact_strength, mention_focus) и расчет интегрального влияния на актив.
- **Рекомендации на покупку/продажу**: граф принятия решений на LangGraph c проверяемой логикой, взвешиванием сигналов и объяснением итоговой оценки.
- **Интерактивный UI**: графики цен/прогнозов/техиндикаторов/новостей, история прогнозов, сводные карточки инструментов.
- **Сервисы**: Docker Compose, Nginx, Postgres, Redis, фоновые джобы.

### Демонстрация
- UI поднимается в контейнере и доступен на `http://localhost` (Nginx). В прод‑режиме фронтенд ходит к API по префиксу `/api`.
- Бэкенд API стартует на `http://localhost:8000` (в режиме разработки) или за Nginx в продакшене.

### Технологии и инструменты
- **Языки**: Python 3.12, TypeScript (Angular 19)
- **ML**: CatBoost, numpy, pandas
- **LLM**: LangChain, LangGraph, LangSmith, Ollama
- **Бэкенд**: Django + DRF, Gunicorn
- **Фронтенд**: Angular 19, ECharts, Angular Material
- **Данные/инфраструктура**: PostgreSQL, SQLAlchemy, Redis, APScheduler, Docker Compose, Nginx
- **Интеграции**: Tinkoff Invest API, парсеры новостей (RBC, Lenta, RG, Finam)

### Модели и особенности
- **TA‑1**: история цен за 52 недели (недели), квартальная отчетность, консенсус аналитиков → прогноз на 30 дней вперед.
- **TA‑1_1**: как TA‑1, но с большим и очищенным датасетом.
- **TA‑1_2**: признаки относительных изменений цены за 2d/1w/1m/3m/6m/1y/2y/3y + квартальная отчетность + консенсус + категориальные признаки (название, валюта, страна) → прогноз относительного изменения на произвольный горизонт.
- **TA‑2**: история цен 52 недели + фундаментал + консенсус + новостной фон по неделям (%) за 4 недели → прогноз на произвольный горизонт.
- **TA‑2_1**: минимумы и максимумы относительных изменений + фундаментал + прогноз аналитиков + новостной фон за месяц → прогноз относительного изменения на произвольный горизонт.
- **Consensus**: агрегирует выходы частных моделей, повышая устойчивость и точность на разных горизонтах.

Обучение и метрики: процесс обучения/валидации заскриптован (`learn.py`, `lib/learn/*`), артефакты и кривые ошибок сохраняются в `catboost_info/`. Используются MAPE/RMSE и временные разрезы.

### LLM‑агент и граф решений
- **Оценка новостей** (`lib/agent/news_rank.py`): для каждой новости считаются `sentiment ∈ [-1;1]`, `impact_strength ∈ [0;1]`, `mention_focus ∈ [0;1]`; итоговое влияние периода — агрегированная метрика influence_score.
- **Рейтинг покупки** (`lib/agent/instrument_rank_buy.py`): взвешивание фундаментала, краткосрочного прогноза и новостей; сохранение тегов в БД (скоринг/обоснование) для UI/алгоритмов.
- **Рейтинг продажи** (`lib/agent/instrument_rank_sell.py`): взвешивание потенциальной прибыли (по данным портфеля) и прогноза движения цены.
- **Создание заявок** (`lib/agent/buy.py`, `lib/agent/sell.py`): генерация таргет‑цены и размера заявки с учётом лота, баланса и лимитов риска.
