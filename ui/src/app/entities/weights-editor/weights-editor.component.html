<div class="weights-editor">
  <p class="weights-label">Веса оценки</p>

  <div class="weights-toggle">
    <button class="weights-toggle-btn" [class.active]="isBuy()" (click)="handleToggle(true)">Покупка</button>
    <button class="weights-toggle-btn" [class.active]="!isBuy()" (click)="handleToggle(false)">Продажа</button>
  </div>

  @if (isBuy()) {
    @if (buyWeights.hasValue()) {
      <div class="weights-list">
        @for (key of weightKeys; track key) {
          <div class="weight-row">
            <span class="weight-name">{{ getLabel(key) }}</span>
            <input
              class="weight-input"
              type="number"
              step="0.1"
              [value]="getWeightValue(true, key)"
              (input)="handleWeightChange(true, key, $event)"
            />
          </div>
        }
      </div>

      @if (isBuyDirty()) {
        <button class="save-btn" [disabled]="isSaving()" (click)="handleSave(true)">
          {{ isSaving() ? 'Сохранение...' : 'Сохранить' }}
        </button>
      }
    }
  } @else {
    @if (sellWeights.hasValue()) {
      <div class="weights-list">
        @for (key of weightKeys; track key) {
          <div class="weight-row">
            <span class="weight-name">{{ getLabel(key) }}</span>
            <input
              class="weight-input"
              type="number"
              step="0.1"
              [value]="getWeightValue(false, key)"
              (input)="handleWeightChange(false, key, $event)"
            />
          </div>
        }
      </div>

      @if (isSellDirty()) {
        <button class="save-btn" [disabled]="isSaving()" (click)="handleSave(false)">
          {{ isSaving() ? 'Сохранение...' : 'Сохранить' }}
        </button>
      }
    }
  }
</div>
